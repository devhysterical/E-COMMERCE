{"version":3,"sources":["../../src/products/products.controller.ts"],"sourcesContent":["import {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Body,\r\n  Patch,\r\n  Param,\r\n  Delete,\r\n  Query,\r\n  UseGuards,\r\n} from '@nestjs/common';\r\nimport { ProductsService } from './products.service';\r\nimport { CreateProductDto, UpdateProductDto } from './dto/product.dto';\r\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '../common/guards/roles.guard';\r\nimport { Roles } from '../common/decorators/roles.decorator';\r\nimport { Role } from '@prisma/client';\r\n\r\n@Controller('products')\r\n@UseGuards(JwtAuthGuard, RolesGuard)\r\nexport class ProductsController {\r\n  constructor(private readonly productsService: ProductsService) {}\r\n\r\n  @Post()\r\n  @Roles(Role.ADMIN)\r\n  create(@Body() createProductDto: CreateProductDto) {\r\n    return this.productsService.create(createProductDto);\r\n  }\r\n\r\n  @Get()\r\n  findAll(\r\n    @Query('categoryId') categoryId?: string,\r\n    @Query('search') search?: string,\r\n    @Query('page') page?: string,\r\n    @Query('limit') limit?: string,\r\n    @Query('sortBy') sortBy?: 'price' | 'name' | 'createdAt',\r\n    @Query('sortOrder') sortOrder?: 'asc' | 'desc',\r\n    @Query('minPrice') minPrice?: string,\r\n    @Query('maxPrice') maxPrice?: string,\r\n  ) {\r\n    return this.productsService.findAll(\r\n      categoryId,\r\n      search,\r\n      page ? parseInt(page, 10) : 1,\r\n      limit ? parseInt(limit, 10) : 12,\r\n      sortBy || 'createdAt',\r\n      sortOrder || 'desc',\r\n      minPrice ? parseInt(minPrice, 10) : undefined,\r\n      maxPrice ? parseInt(maxPrice, 10) : undefined,\r\n    );\r\n  }\r\n\r\n  @Get(':id')\r\n  findOne(@Param('id') id: string) {\r\n    return this.productsService.findOne(id);\r\n  }\r\n\r\n  @Patch(':id')\r\n  @Roles(Role.ADMIN)\r\n  update(@Param('id') id: string, @Body() updateProductDto: UpdateProductDto) {\r\n    return this.productsService.update(id, updateProductDto);\r\n  }\r\n\r\n  @Delete(':id')\r\n  @Roles(Role.ADMIN)\r\n  remove(@Param('id') id: string) {\r\n    return this.productsService.remove(id);\r\n  }\r\n\r\n  // ===== Product Images Endpoints =====\r\n\r\n  @Get(':id/images')\r\n  getImages(@Param('id') id: string) {\r\n    return this.productsService.getImages(id);\r\n  }\r\n\r\n  @Post(':id/images')\r\n  @Roles(Role.ADMIN)\r\n  addImage(\r\n    @Param('id') id: string,\r\n    @Body() body: { imageUrl: string; isPrimary?: boolean },\r\n  ) {\r\n    return this.productsService.addImage(id, body.imageUrl, body.isPrimary);\r\n  }\r\n\r\n  @Delete(':id/images/:imageId')\r\n  @Roles(Role.ADMIN)\r\n  removeImage(@Param('id') id: string, @Param('imageId') imageId: string) {\r\n    return this.productsService.removeImage(id, imageId);\r\n  }\r\n\r\n  @Patch(':id/images/:imageId/primary')\r\n  @Roles(Role.ADMIN)\r\n  setPrimaryImage(@Param('id') id: string, @Param('imageId') imageId: string) {\r\n    return this.productsService.setPrimaryImage(id, imageId);\r\n  }\r\n}\r\n"],"names":["ProductsController","create","createProductDto","productsService","findAll","categoryId","search","page","limit","sortBy","sortOrder","minPrice","maxPrice","parseInt","undefined","findOne","id","update","updateProductDto","remove","getImages","addImage","body","imageUrl","isPrimary","removeImage","imageId","setPrimaryImage","ADMIN"],"mappings":";;;;+BAoBaA;;;eAAAA;;;wBAVN;iCACyB;4BACmB;8BACtB;4BACF;gCACL;wBACD;;;;;;;;;;;;;;;AAId,IAAA,AAAMA,qBAAN,MAAMA;IAKXC,OAAO,AAAQC,gBAAkC,EAAE;QACjD,OAAO,IAAI,CAACC,eAAe,CAACF,MAAM,CAACC;IACrC;IAGAE,QACE,AAAqBC,UAAmB,EACxC,AAAiBC,MAAe,EAChC,AAAeC,IAAa,EAC5B,AAAgBC,KAAc,EAC9B,AAAiBC,MAAuC,EACxD,AAAoBC,SAA0B,EAC9C,AAAmBC,QAAiB,EACpC,AAAmBC,QAAiB,EACpC;QACA,OAAO,IAAI,CAACT,eAAe,CAACC,OAAO,CACjCC,YACAC,QACAC,OAAOM,SAASN,MAAM,MAAM,GAC5BC,QAAQK,SAASL,OAAO,MAAM,IAC9BC,UAAU,aACVC,aAAa,QACbC,WAAWE,SAASF,UAAU,MAAMG,WACpCF,WAAWC,SAASD,UAAU,MAAME;IAExC;IAGAC,QAAQ,AAAaC,EAAU,EAAE;QAC/B,OAAO,IAAI,CAACb,eAAe,CAACY,OAAO,CAACC;IACtC;IAIAC,OAAO,AAAaD,EAAU,EAAE,AAAQE,gBAAkC,EAAE;QAC1E,OAAO,IAAI,CAACf,eAAe,CAACc,MAAM,CAACD,IAAIE;IACzC;IAIAC,OAAO,AAAaH,EAAU,EAAE;QAC9B,OAAO,IAAI,CAACb,eAAe,CAACgB,MAAM,CAACH;IACrC;IAEA,uCAAuC;IAGvCI,UAAU,AAAaJ,EAAU,EAAE;QACjC,OAAO,IAAI,CAACb,eAAe,CAACiB,SAAS,CAACJ;IACxC;IAIAK,SACE,AAAaL,EAAU,EACvB,AAAQM,IAA+C,EACvD;QACA,OAAO,IAAI,CAACnB,eAAe,CAACkB,QAAQ,CAACL,IAAIM,KAAKC,QAAQ,EAAED,KAAKE,SAAS;IACxE;IAIAC,YAAY,AAAaT,EAAU,EAAE,AAAkBU,OAAe,EAAE;QACtE,OAAO,IAAI,CAACvB,eAAe,CAACsB,WAAW,CAACT,IAAIU;IAC9C;IAIAC,gBAAgB,AAAaX,EAAU,EAAE,AAAkBU,OAAe,EAAE;QAC1E,OAAO,IAAI,CAACvB,eAAe,CAACwB,eAAe,CAACX,IAAIU;IAClD;IA1EA,YAAY,AAAiBvB,eAAgC,CAAE;aAAlCA,kBAAAA;IAAmC;AA2ElE;;;4CAxEcyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4CAkCAA;;;;;;;;;;;;4CAMAA;;;;;;;;;;;;;;;;;;;4CAaAA;;;;;;;;;;;;4CASAA;;;;;;;;;;;;4CAMAA"}