{"version":3,"sources":["../../src/prisma/prisma.service.ts"],"sourcesContent":["import { Injectable, OnModuleInit, OnModuleDestroy } from '@nestjs/common';\r\nimport { PrismaClient } from '@prisma/client';\r\nimport { PrismaPg } from '@prisma/adapter-pg';\r\nimport { Pool } from 'pg';\r\nimport 'dotenv/config';\r\n\r\n@Injectable()\r\nexport class PrismaService\r\n  extends PrismaClient\r\n  implements OnModuleInit, OnModuleDestroy\r\n{\r\n  private pool: Pool;\r\n\r\n  constructor() {\r\n    const pool = new Pool({ connectionString: process.env.DATABASE_URL });\r\n    const adapter = new PrismaPg(pool);\r\n    super({ adapter });\r\n    this.pool = pool;\r\n  }\r\n\r\n  async onModuleInit() {\r\n    await this.$connect();\r\n  }\r\n\r\n  async onModuleDestroy() {\r\n    await this.$disconnect();\r\n    await this.pool.end();\r\n  }\r\n}\r\n"],"names":["PrismaService","PrismaClient","onModuleInit","$connect","onModuleDestroy","$disconnect","pool","end","Pool","connectionString","process","env","DATABASE_URL","adapter","PrismaPg"],"mappings":";;;;+BAOaA;;;eAAAA;;;wBAP6C;wBAC7B;2BACJ;oBACJ;QACd;;;;;;;;;;AAGA,IAAA,AAAMA,gBAAN,MAAMA,sBACHC,oBAAY;IAYpB,MAAMC,eAAe;QACnB,MAAM,IAAI,CAACC,QAAQ;IACrB;IAEA,MAAMC,kBAAkB;QACtB,MAAM,IAAI,CAACC,WAAW;QACtB,MAAM,IAAI,CAACC,IAAI,CAACC,GAAG;IACrB;IAdA,aAAc;QACZ,MAAMD,OAAO,IAAIE,QAAI,CAAC;YAAEC,kBAAkBC,QAAQC,GAAG,CAACC,YAAY;QAAC;QACnE,MAAMC,UAAU,IAAIC,mBAAQ,CAACR;QAC7B,KAAK,CAAC;YAAEO;QAAQ;QAChB,IAAI,CAACP,IAAI,GAAGA;IACd;AAUF"}