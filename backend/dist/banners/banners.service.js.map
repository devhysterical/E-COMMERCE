{"version":3,"sources":["../../src/banners/banners.service.ts"],"sourcesContent":["import { Injectable, NotFoundException } from '@nestjs/common';\r\nimport { PrismaService } from '../prisma/prisma.service';\r\nimport { CreateBannerDto, UpdateBannerDto } from './dto/banner.dto';\r\n\r\n@Injectable()\r\nexport class BannersService {\r\n  constructor(private prisma: PrismaService) {}\r\n\r\n  // Public: Lấy danh sách banners đang active\r\n  async findAllActive() {\r\n    return this.prisma.banner.findMany({\r\n      where: { isActive: true },\r\n      orderBy: { sortOrder: 'asc' },\r\n    });\r\n  }\r\n\r\n  // Admin: Lấy tất cả banners\r\n  async findAll() {\r\n    return this.prisma.banner.findMany({\r\n      orderBy: { sortOrder: 'asc' },\r\n    });\r\n  }\r\n\r\n  // Admin: Lấy một banner theo ID\r\n  async findOne(id: string) {\r\n    const banner = await this.prisma.banner.findUnique({\r\n      where: { id },\r\n    });\r\n    if (!banner) {\r\n      throw new NotFoundException('Banner không tồn tại');\r\n    }\r\n    return banner;\r\n  }\r\n\r\n  // Admin: Tạo banner mới\r\n  async create(dto: CreateBannerDto) {\r\n    return this.prisma.banner.create({\r\n      data: dto,\r\n    });\r\n  }\r\n\r\n  // Admin: Cập nhật banner\r\n  async update(id: string, dto: UpdateBannerDto) {\r\n    await this.findOne(id);\r\n    return this.prisma.banner.update({\r\n      where: { id },\r\n      data: dto,\r\n    });\r\n  }\r\n\r\n  // Admin: Xóa banner\r\n  async remove(id: string) {\r\n    await this.findOne(id);\r\n    return this.prisma.banner.delete({\r\n      where: { id },\r\n    });\r\n  }\r\n}\r\n"],"names":["BannersService","findAllActive","prisma","banner","findMany","where","isActive","orderBy","sortOrder","findAll","findOne","id","findUnique","NotFoundException","create","dto","data","update","remove","delete"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBALiC;+BAChB;;;;;;;;;;AAIvB,IAAA,AAAMA,iBAAN,MAAMA;IAGX,4CAA4C;IAC5C,MAAMC,gBAAgB;QACpB,OAAO,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,QAAQ,CAAC;YACjCC,OAAO;gBAAEC,UAAU;YAAK;YACxBC,SAAS;gBAAEC,WAAW;YAAM;QAC9B;IACF;IAEA,4BAA4B;IAC5B,MAAMC,UAAU;QACd,OAAO,IAAI,CAACP,MAAM,CAACC,MAAM,CAACC,QAAQ,CAAC;YACjCG,SAAS;gBAAEC,WAAW;YAAM;QAC9B;IACF;IAEA,gCAAgC;IAChC,MAAME,QAAQC,EAAU,EAAE;QACxB,MAAMR,SAAS,MAAM,IAAI,CAACD,MAAM,CAACC,MAAM,CAACS,UAAU,CAAC;YACjDP,OAAO;gBAAEM;YAAG;QACd;QACA,IAAI,CAACR,QAAQ;YACX,MAAM,IAAIU,yBAAiB,CAAC;QAC9B;QACA,OAAOV;IACT;IAEA,wBAAwB;IACxB,MAAMW,OAAOC,GAAoB,EAAE;QACjC,OAAO,IAAI,CAACb,MAAM,CAACC,MAAM,CAACW,MAAM,CAAC;YAC/BE,MAAMD;QACR;IACF;IAEA,yBAAyB;IACzB,MAAME,OAAON,EAAU,EAAEI,GAAoB,EAAE;QAC7C,MAAM,IAAI,CAACL,OAAO,CAACC;QACnB,OAAO,IAAI,CAACT,MAAM,CAACC,MAAM,CAACc,MAAM,CAAC;YAC/BZ,OAAO;gBAAEM;YAAG;YACZK,MAAMD;QACR;IACF;IAEA,oBAAoB;IACpB,MAAMG,OAAOP,EAAU,EAAE;QACvB,MAAM,IAAI,CAACD,OAAO,CAACC;QACnB,OAAO,IAAI,CAACT,MAAM,CAACC,MAAM,CAACgB,MAAM,CAAC;YAC/Bd,OAAO;gBAAEM;YAAG;QACd;IACF;IAlDA,YAAY,AAAQT,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAmD9C"}