{"version":3,"sources":["../../src/flash-sale/flash-sale.controller.ts"],"sourcesContent":["import {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Patch,\r\n  Delete,\r\n  Body,\r\n  Param,\r\n  UseGuards,\r\n} from '@nestjs/common';\r\nimport { FlashSaleService } from './flash-sale.service';\r\nimport { CreateFlashSaleDto } from './dto/create-flash-sale.dto';\r\nimport { UpdateFlashSaleDto } from './dto/update-flash-sale.dto';\r\nimport { AddFlashSaleItemDto } from './dto/add-item.dto';\r\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '../common/guards/roles.guard';\r\nimport { Roles } from '../common/decorators/roles.decorator';\r\nimport { Role } from '@prisma/client';\r\n\r\n@Controller('flash-sales')\r\nexport class FlashSaleController {\r\n  constructor(private readonly flashSaleService: FlashSaleService) {}\r\n\r\n  // === Public ===\r\n\r\n  @Get('active')\r\n  getActive() {\r\n    return this.flashSaleService.getActiveFlashSales();\r\n  }\r\n\r\n  // === Admin ===\r\n\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.ADMIN)\r\n  @Get()\r\n  findAll() {\r\n    return this.flashSaleService.findAll();\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.ADMIN)\r\n  @Get(':id')\r\n  findOne(@Param('id') id: string) {\r\n    return this.flashSaleService.findOne(id);\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.ADMIN)\r\n  @Post()\r\n  create(@Body() dto: CreateFlashSaleDto) {\r\n    return this.flashSaleService.create(dto);\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.ADMIN)\r\n  @Patch(':id')\r\n  update(@Param('id') id: string, @Body() dto: UpdateFlashSaleDto) {\r\n    return this.flashSaleService.update(id, dto);\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.ADMIN)\r\n  @Delete(':id')\r\n  remove(@Param('id') id: string) {\r\n    return this.flashSaleService.remove(id);\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.ADMIN)\r\n  @Post(':id/items')\r\n  addItem(@Param('id') id: string, @Body() dto: AddFlashSaleItemDto) {\r\n    return this.flashSaleService.addItem(id, dto);\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.ADMIN)\r\n  @Delete(':id/items/:itemId')\r\n  removeItem(@Param('id') id: string, @Param('itemId') itemId: string) {\r\n    return this.flashSaleService.removeItem(id, itemId);\r\n  }\r\n}\r\n"],"names":["FlashSaleController","getActive","flashSaleService","getActiveFlashSales","findAll","findOne","id","create","dto","update","remove","addItem","removeItem","itemId","ADMIN"],"mappings":";;;;+BAoBaA;;;eAAAA;;;wBAXN;kCAC0B;oCACE;oCACA;4BACC;8BACP;4BACF;gCACL;wBACD;;;;;;;;;;;;;;;AAGd,IAAA,AAAMA,sBAAN,MAAMA;IAGX,iBAAiB;IAGjBC,YAAY;QACV,OAAO,IAAI,CAACC,gBAAgB,CAACC,mBAAmB;IAClD;IAEA,gBAAgB;IAKhBC,UAAU;QACR,OAAO,IAAI,CAACF,gBAAgB,CAACE,OAAO;IACtC;IAKAC,QAAQ,AAAaC,EAAU,EAAE;QAC/B,OAAO,IAAI,CAACJ,gBAAgB,CAACG,OAAO,CAACC;IACvC;IAKAC,OAAO,AAAQC,GAAuB,EAAE;QACtC,OAAO,IAAI,CAACN,gBAAgB,CAACK,MAAM,CAACC;IACtC;IAKAC,OAAO,AAAaH,EAAU,EAAE,AAAQE,GAAuB,EAAE;QAC/D,OAAO,IAAI,CAACN,gBAAgB,CAACO,MAAM,CAACH,IAAIE;IAC1C;IAKAE,OAAO,AAAaJ,EAAU,EAAE;QAC9B,OAAO,IAAI,CAACJ,gBAAgB,CAACQ,MAAM,CAACJ;IACtC;IAKAK,QAAQ,AAAaL,EAAU,EAAE,AAAQE,GAAwB,EAAE;QACjE,OAAO,IAAI,CAACN,gBAAgB,CAACS,OAAO,CAACL,IAAIE;IAC3C;IAKAI,WAAW,AAAaN,EAAU,EAAE,AAAiBO,MAAc,EAAE;QACnE,OAAO,IAAI,CAACX,gBAAgB,CAACU,UAAU,CAACN,IAAIO;IAC9C;IA1DA,YAAY,AAAiBX,gBAAkC,CAAE;aAApCA,mBAAAA;IAAqC;AA2DpE;;;;;;;;;4CA/CcY;;;;;;;;4CAOAA;;;;;;;;;;;4CAOAA;;;;;;;;;;;4CAOAA;;;;;;;;;;;;;4CAOAA;;;;;;;;;;;4CAOAA;;;;;;;;;;;;;4CAOAA"}