{"version":3,"sources":["../../src/auth/auth.controller.ts"],"sourcesContent":["import {\r\n  Body,\r\n  Controller,\r\n  Post,\r\n  HttpCode,\r\n  HttpStatus,\r\n  UseGuards,\r\n  Request,\r\n} from '@nestjs/common';\r\nimport { Throttle } from '@nestjs/throttler';\r\nimport { AuthGuard } from '@nestjs/passport';\r\nimport { AuthService } from './auth.service';\r\nimport {\r\n  LoginDto,\r\n  RegisterDto,\r\n  ForgotPasswordDto,\r\n  GoogleAuthDto,\r\n} from './dto/auth.dto';\r\nimport { SendOtpDto } from './dto/otp.dto';\r\nimport { RefreshTokenDto } from './dto/refresh-token.dto';\r\n\r\n@Controller('auth')\r\n@Throttle({ default: { ttl: 60000, limit: 5 } })\r\nexport class AuthController {\r\n  constructor(private authService: AuthService) {}\r\n\r\n  @Post('send-otp')\r\n  @HttpCode(HttpStatus.OK)\r\n  sendOtp(@Body() dto: SendOtpDto) {\r\n    return this.authService.sendOtp(dto);\r\n  }\r\n\r\n  @Post('register')\r\n  register(@Body() dto: RegisterDto) {\r\n    return this.authService.register(dto);\r\n  }\r\n\r\n  @Post('login')\r\n  @HttpCode(HttpStatus.OK)\r\n  login(@Body() dto: LoginDto) {\r\n    return this.authService.login(dto);\r\n  }\r\n\r\n  @Post('refresh')\r\n  @HttpCode(HttpStatus.OK)\r\n  refresh(@Body() dto: RefreshTokenDto) {\r\n    return this.authService.refreshTokens(dto.refreshToken);\r\n  }\r\n\r\n  @Post('logout')\r\n  @HttpCode(HttpStatus.OK)\r\n  @UseGuards(AuthGuard('jwt'))\r\n  logout(@Request() req: { user: { userId: string } }) {\r\n    return this.authService.logout(req.user.userId);\r\n  }\r\n\r\n  @Post('forgot-password')\r\n  @HttpCode(HttpStatus.OK)\r\n  forgotPassword(@Body() dto: ForgotPasswordDto) {\r\n    return this.authService.forgotPassword(dto);\r\n  }\r\n\r\n  @Post('google')\r\n  @HttpCode(HttpStatus.OK)\r\n  googleAuth(@Body() dto: GoogleAuthDto) {\r\n    return this.authService.googleAuth(dto);\r\n  }\r\n}\r\n"],"names":["AuthController","sendOtp","dto","authService","register","login","refresh","refreshTokens","refreshToken","logout","req","user","userId","forgotPassword","googleAuth","OK","default","ttl","limit"],"mappings":";;;;+BAuBaA;;;eAAAA;;;wBAfN;2BACkB;0BACC;6BACE;yBAMrB;wBACoB;iCACK;;;;;;;;;;;;;;;AAIzB,IAAA,AAAMA,iBAAN,MAAMA;IAKXC,QAAQ,AAAQC,GAAe,EAAE;QAC/B,OAAO,IAAI,CAACC,WAAW,CAACF,OAAO,CAACC;IAClC;IAGAE,SAAS,AAAQF,GAAgB,EAAE;QACjC,OAAO,IAAI,CAACC,WAAW,CAACC,QAAQ,CAACF;IACnC;IAIAG,MAAM,AAAQH,GAAa,EAAE;QAC3B,OAAO,IAAI,CAACC,WAAW,CAACE,KAAK,CAACH;IAChC;IAIAI,QAAQ,AAAQJ,GAAoB,EAAE;QACpC,OAAO,IAAI,CAACC,WAAW,CAACI,aAAa,CAACL,IAAIM,YAAY;IACxD;IAKAC,OAAO,AAAWC,GAAiC,EAAE;QACnD,OAAO,IAAI,CAACP,WAAW,CAACM,MAAM,CAACC,IAAIC,IAAI,CAACC,MAAM;IAChD;IAIAC,eAAe,AAAQX,GAAsB,EAAE;QAC7C,OAAO,IAAI,CAACC,WAAW,CAACU,cAAc,CAACX;IACzC;IAIAY,WAAW,AAAQZ,GAAkB,EAAE;QACrC,OAAO,IAAI,CAACC,WAAW,CAACW,UAAU,CAACZ;IACrC;IA1CA,YAAY,AAAQC,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AA2CjD;;;6CAxCuBY;;;;;;;;;;;;;;;;;;;6CAWAA;;;;;;;;;;6CAMAA;;;;;;;;;;6CAMAA;;;;;;;;;;;6CAOAA;;;;;;;;;;6CAMAA;;;;;;;;;;;QAzCXC,SAAS;YAAEC,KAAK;YAAOC,OAAO;QAAE"}