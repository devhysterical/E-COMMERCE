{"version":3,"sources":["../../src/admin/admin.controller.ts"],"sourcesContent":["import { Controller, Get, Patch, Param, Body, UseGuards } from '@nestjs/common';\r\nimport { IsIn, IsNotEmpty } from 'class-validator';\r\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '../common/guards/roles.guard';\r\nimport { Roles } from '../common/decorators/roles.decorator';\r\nimport { UsersService } from '../users/users.service';\r\n\r\nclass UpdateRoleDto {\r\n  @IsNotEmpty({ message: 'Role không được để trống' })\r\n  @IsIn(['USER', 'ADMIN'], { message: 'Role phải là USER hoặc ADMIN' })\r\n  role: 'USER' | 'ADMIN';\r\n}\r\n\r\n@Controller('admin')\r\n@UseGuards(JwtAuthGuard, RolesGuard)\r\n@Roles('ADMIN')\r\nexport class AdminController {\r\n  constructor(private readonly usersService: UsersService) {}\r\n\r\n  @Get('users')\r\n  getAllUsers() {\r\n    return this.usersService.findAll();\r\n  }\r\n\r\n  @Patch('users/:id/role')\r\n  updateUserRole(@Param('id') id: string, @Body() dto: UpdateRoleDto) {\r\n    return this.usersService.updateRole(id, dto.role);\r\n  }\r\n}\r\n"],"names":["AdminController","UpdateRoleDto","message","getAllUsers","usersService","findAll","updateUserRole","id","dto","updateRole","role"],"mappings":";;;;+BAgBaA;;;eAAAA;;;wBAhBkD;gCAC9B;8BACJ;4BACF;gCACL;8BACO;;;;;;;;;;;;;;;AAE7B,IAAA,AAAMC,gBAAN,MAAMA;AAIN;;;QAHgBC,SAAS;;;QAChB;QAAQ;;QAAYA,SAAS;;;;AAO/B,IAAA,AAAMF,kBAAN,MAAMA;IAIXG,cAAc;QACZ,OAAO,IAAI,CAACC,YAAY,CAACC,OAAO;IAClC;IAGAC,eAAe,AAAaC,EAAU,EAAE,AAAQC,GAAkB,EAAE;QAClE,OAAO,IAAI,CAACJ,YAAY,CAACK,UAAU,CAACF,IAAIC,IAAIE,IAAI;IAClD;IAVA,YAAY,AAAiBN,YAA0B,CAAE;aAA5BA,eAAAA;IAA6B;AAW5D"}