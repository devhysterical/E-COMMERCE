{"version":3,"sources":["../../src/reviews/reviews.controller.ts"],"sourcesContent":["import {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Body,\r\n  Patch,\r\n  Param,\r\n  Delete,\r\n  UseGuards,\r\n  Request,\r\n} from '@nestjs/common';\r\nimport { ReviewsService } from './reviews.service';\r\nimport { CreateReviewDto, UpdateReviewDto } from './dto/review.dto';\r\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\r\n\r\n@Controller('reviews')\r\nexport class ReviewsController {\r\n  constructor(private readonly reviewsService: ReviewsService) {}\r\n\r\n  @UseGuards(JwtAuthGuard)\r\n  @Post()\r\n  create(\r\n    @Request() req: { user: { userId: string } },\r\n    @Body() dto: CreateReviewDto,\r\n  ) {\r\n    return this.reviewsService.create(req.user.userId, dto);\r\n  }\r\n\r\n  @Get('product/:productId')\r\n  findByProduct(@Param('productId') productId: string) {\r\n    return this.reviewsService.findByProduct(productId);\r\n  }\r\n\r\n  @Get('product/:productId/stats')\r\n  getProductStats(@Param('productId') productId: string) {\r\n    return this.reviewsService.getProductStats(productId);\r\n  }\r\n\r\n  @Get(':id')\r\n  findOne(@Param('id') id: string) {\r\n    return this.reviewsService.findOne(id);\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard)\r\n  @Patch(':id')\r\n  update(\r\n    @Param('id') id: string,\r\n    @Request() req: { user: { userId: string; role: string } },\r\n    @Body() dto: UpdateReviewDto,\r\n  ) {\r\n    return this.reviewsService.update(id, req.user.userId, req.user.role, dto);\r\n  }\r\n\r\n  @UseGuards(JwtAuthGuard)\r\n  @Delete(':id')\r\n  remove(\r\n    @Param('id') id: string,\r\n    @Request() req: { user: { userId: string; role: string } },\r\n  ) {\r\n    return this.reviewsService.remove(id, req.user.userId, req.user.role);\r\n  }\r\n}\r\n"],"names":["ReviewsController","create","req","dto","reviewsService","user","userId","findByProduct","productId","getProductStats","findOne","id","update","role","remove"],"mappings":";;;;+BAgBaA;;;eAAAA;;;wBANN;gCACwB;2BACkB;8BACpB;;;;;;;;;;;;;;;AAGtB,IAAA,AAAMA,oBAAN,MAAMA;IAKXC,OACE,AAAWC,GAAiC,EAC5C,AAAQC,GAAoB,EAC5B;QACA,OAAO,IAAI,CAACC,cAAc,CAACH,MAAM,CAACC,IAAIG,IAAI,CAACC,MAAM,EAAEH;IACrD;IAGAI,cAAc,AAAoBC,SAAiB,EAAE;QACnD,OAAO,IAAI,CAACJ,cAAc,CAACG,aAAa,CAACC;IAC3C;IAGAC,gBAAgB,AAAoBD,SAAiB,EAAE;QACrD,OAAO,IAAI,CAACJ,cAAc,CAACK,eAAe,CAACD;IAC7C;IAGAE,QAAQ,AAAaC,EAAU,EAAE;QAC/B,OAAO,IAAI,CAACP,cAAc,CAACM,OAAO,CAACC;IACrC;IAIAC,OACE,AAAaD,EAAU,EACvB,AAAWT,GAA+C,EAC1D,AAAQC,GAAoB,EAC5B;QACA,OAAO,IAAI,CAACC,cAAc,CAACQ,MAAM,CAACD,IAAIT,IAAIG,IAAI,CAACC,MAAM,EAAEJ,IAAIG,IAAI,CAACQ,IAAI,EAAEV;IACxE;IAIAW,OACE,AAAaH,EAAU,EACvB,AAAWT,GAA+C,EAC1D;QACA,OAAO,IAAI,CAACE,cAAc,CAACU,MAAM,CAACH,IAAIT,IAAIG,IAAI,CAACC,MAAM,EAAEJ,IAAIG,IAAI,CAACQ,IAAI;IACtE;IA3CA,YAAY,AAAiBT,cAA8B,CAAE;aAAhCA,iBAAAA;IAAiC;AA4ChE"}